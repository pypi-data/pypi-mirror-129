(self.webpackChunkmetanno=self.webpackChunkmetanno||[]).push([[874],{6043:function(e,t,r){"use strict";var n=r(6295);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,o,i,a){try{var u=e[i](a),_=u.value}catch(e){return void r(e)}u.done?t(_):Promise.resolve(_).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,_,"next",e)}function _(e){u(i,n,o,a,_,"throw",e)}a(void 0)}))}}!function(e){function t(){return(t=_(regeneratorRuntime.mark((function e(t,r,o){var a,u,_,c,s,l,d,p,f,m,h,y,v,g,b,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.model,d=l.value.text,p=!(null!=t&&null!==(a=t.outputArea)&&void 0!==a&&null!==(u=a.widgets)&&void 0!==u&&null!==(_=u[0])&&void 0!==_&&null!==(c=_.widgets)&&void 0!==c&&c[1].editor_type),d.trim()&&null!==(s=r.session)&&void 0!==s&&s.kernel){e.next=6;break}return l.clearExecution(),e.abrupt("return");case 6:return f={cellId:l.id},o=i(i(i({},l.metadata.toJSON()),o),f),m=o.recordTiming,l.clearExecution(),p&&(t.outputHidden=!1),t.setPrompt("*"),l.trusted=!0,e.prev=13,y=n.OutputArea.execute(d,t.outputArea,r,o),m?(v=function(e){var t;switch(e.header.msg_type){case"status":t="status.".concat(e.content.execution_state);break;case"execute_input":t="execute_input";break;default:return!0}var r=e.header.date||(new Date).toISOString(),n=Object.assign({},l.metadata.get("execution"));return n["iopub.".concat(t)]=r,l.metadata.set("execution",n),!0},t.outputArea.future.registerMessageHook(v)):l.metadata.delete("execution"),h=t.outputArea.future,e.next=19,y;case 19:return g=e.sent,l.executionCount=g.content.execution_count,m&&(b=Object.assign({},l.metadata.get("execution")),(w=g.metadata.started)&&(b["shell.execute_reply.started"]=w),x=g.header.date,b["shell.execute_reply"]=x||(new Date).toISOString(),l.metadata.set("execution",b)),e.abrupt("return",g);case 25:throw e.prev=25,e.t0=e.catch(13),h&&!t.isDisposed&&t.outputArea.future===h&&t.setPrompt(""),e.t0;case 29:case"end":return e.stop()}}),e,null,[[13,25]])})))).apply(this,arguments)}e.old_execute=e.execute,e.execute=function(e,r,n){return t.apply(this,arguments)}}(r(2684).CodeCell)},6567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5666);var n,o=(n=r(6271))&&n.__esModule?n:{default:n},i=r(5067),a=r(2481),u=r(2826),_=r(5797),c=r(2522);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,o,i,a){try{var u=e[i](a),_=u.value}catch(e){return void r(e)}u.done?t(_):Promise.resolve(_).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){m(i,n,o,a,u,"next",e)}function u(e){m(i,n,o,a,u,"throw",e)}a(void 0)}))}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(1437),(0,u.enablePatches)(),t.default=function e(t,r){var n,p,f=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),y(this,"actions",void 0),y(this,"app",void 0),y(this,"store",void 0),y(this,"views",void 0),y(this,"context",void 0),y(this,"isDisposed",void 0),y(this,"comm_target_name",void 0),y(this,"settings",void 0),y(this,"comm",void 0),y(this,"source_code_py",void 0),y(this,"sourcemap",void 0),y(this,"_handleCommOpen",(function(e,t){f.comm=e,f.comm.onMsg=f.onMsg,f.comm.send({method:"sync_request",data:{}})})),y(this,"_create_comm",function(){var e=h(regeneratorRuntime.mark((function e(t,r,n,o,i){var a,u,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null===(a=f.context.sessionContext.session)||void 0===a?void 0:a.kernel){e.next=3;break}throw new Error("No current kernel");case 3:return _=u.createComm(t,r),(n||o)&&_.open(n,o,i),e.abrupt("return",_);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,o,i){return e.apply(this,arguments)}}()),y(this,"_get_comm_info",h(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=f.context.sessionContext.session)||void 0===t?void 0:t.kernel){e.next=3;break}throw new Error("No current kernel");case 3:return e.next=5,r.requestCommInfo({target_name:f.comm_target_name});case 5:if("ok"!==(n=e.sent).content.status){e.next=10;break}return e.abrupt("return",n.content.comms);case 10:return e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})))),y(this,"connectToAnyKernel",h(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.context.sessionContext){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.context.sessionContext.ready;case 4:if(!1!==f.context.sessionContext.session.kernel.handleComms){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,f._get_comm_info();case 8:if(t=e.sent,r=Object.keys(t).filter((function(e){return t[e].target_name===f.comm_target_name})),console.log("Jupyter annotator comm ids",r,"(there should be at most one)"),!(r.length>0)){e.next=16;break}return e.next=14,f._create_comm(f.comm_target_name,r[0]);case 14:n=e.sent,f._handleCommOpen(n);case 16:case"end":return e.stop()}}),e)})))),y(this,"onMsg",(function(e){try{var t=e.content.data,r=t.method,n=t.data;if("action"===r)f.store.dispatch(n);else if("run_method"===r){var o;(o=f.app)[n.method_name].apply(o,d(n.args))}else if("patch"===r)try{var i=(0,u.applyPatches)(f.store.getState(),n.patches);f.store.dispatch({type:"SET_STATE",payload:i})}catch(e){console.error("ERROR DURING PATCHING"),console.error(e)}else"set_app_code"===r?(f.app=(0,a.eval_code)(n.code)(),f.sourcemap=(0,c.decode)(n.sourcemap),f.source_code_py=n.py_code,f.app.manager=f,f.views.forEach((function(e){return e.showContent()}))):"sync"===r&&f.store.dispatch({type:"SET_STATE",payload:n.state})}catch(e){console.error("Error during comm message reception",e)}})),y(this,"try_catch_exec",(function(e){return function(){try{if(e)return e.apply(void 0,arguments)}catch(e){console.log("Got an error !"),console.log(e);var t=d(e.stack.matchAll(/<anonymous>:(\d+):(\d+)/gm));if(t.length>0&&null!==f.sourcemap){var r=l(t[0],3),n=(r[0],r[1]),o=(r[2],f.source_code_py.split("\n")[f.sourcemap[parseInt(n)-1][0][2]].trim());f.toastError("Error: ".concat(e.message," at \n").concat(o))}else e.__args__?f.toastError("Error: ".concat(e.__args__[0])):f.toastError("Error: ".concat(e.message))}}})),y(this,"toastError",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;_.INotification.error(o.default.createElement("div",null,e.split("\n").map((function(e){return o.default.createElement("p",null,e)}))),{autoClose:t})})),y(this,"toastInfo",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;_.INotification.info(o.default.createElement("div",null,e.split("\n").map((function(e){return o.default.createElement("p",null,e)}))),{autoClose:t})})),y(this,"_handleKernelChanged",(function(e){e.name;var t=e.oldValue,r=e.newValue;t&&(console.log("Removing comm",t),f.comm=null,t.removeCommTarget(f.comm_target_name,f._handleCommOpen)),r&&(console.log("Registering comm",r),r.registerCommTarget(f.comm_target_name,f._handleCommOpen))})),y(this,"_handleKernelStatusChange",(function(e){})),y(this,"dispose",(function(){f.isDisposed||(f.isDisposed=!0)})),y(this,"reduce",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return"SET_STATE"===r.type?r.payload:null!==(e=f.app)&&void 0!==e&&e.reduce?f.app.reduce(t,r):t})),y(this,"getState",(function(){return f.store.getState()})),y(this,"dispatch",(function(e){return f.store.dispatch(e)})),y(this,"createStore",(function(){var e="object"===("undefined"==typeof window?"undefined":s(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):i.compose;return(0,i.createStore)(f.reduce,e((0,i.applyMiddleware)()))})),this.store=this.createStore(),this.actions={},this.app=null,this.comm_target_name="metanno",this.context=t,this.comm=null,this.views=new Set,this.source_code_py="",this.sourcemap=null,t.sessionContext.kernelChanged.connect((function(e,t){f._handleKernelChanged(t)})),t.sessionContext.statusChanged.connect((function(e,t){f._handleKernelStatusChange(t)})),null!==(n=t.sessionContext.session)&&void 0!==n&&n.kernel&&this._handleKernelChanged({name:"kernel",oldValue:null,newValue:null===(p=t.sessionContext.session)||void 0===p?void 0:p.kernel}),this.connectToAnyKernel().then(),this.settings=r}},2874:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.notebookIcon=t.default=t.contextToMetannoManagerRegistry=t.MetannoArea=void 0,t.registerMetannoManager=J,r(5666);var o=r(9850),i=r(8562),a=r(9129),u=r(9706),_=r(5117),c=r(228),s=r(6166),l=r(4725),d=r(3967),p=r(8050),f=r(879),m=r(8841),h=r(5950),y=r(6510),v=r(1797),g=x(r(6567)),b=x(r(9641)),w=x(r(5525));function x(e){return e&&e.__esModule?e:{default:e}}function q(e,t,r,n,o,i,a){try{var u=e[i](a),_=u.value}catch(e){return void r(e)}u.done?t(_):Promise.resolve(_).then(n,o)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function j(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(6043);var R=regeneratorRuntime.mark(K),M=regeneratorRuntime.mark(L),T=regeneratorRuntime.mark(B);function I(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N="application/vnd.jupyter.annotator+json",W=new h.LabIcon({name:"ui-components:metanno",svgstr:w.default});t.notebookIcon=W;var V=new i.AttachedProperty({name:"widgetManager",create:function(){}});t.contextToMetannoManagerRegistry=V;var U={saveState:!1};function K(e){var t,r,n,i,a,u,_,c,s;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:t=I(e.widgets),l.prev=1,t.s();case 3:if((r=t.n()).done){l.next=41;break}if("code"!==(n=r.value).model.type){l.next=39;break}i=I(n.outputArea.widgets),l.prev=7,i.s();case 9:if((a=i.n()).done){l.next=31;break}u=a.value,_=I((0,o.toArray)(u.children())),l.prev=12,_.s();case 14:if((c=_.n()).done){l.next=21;break}if(!((s=c.value)instanceof b.default)){l.next=19;break}return l.next=19,s;case 19:l.next=14;break;case 21:l.next=26;break;case 23:l.prev=23,l.t0=l.catch(12),_.e(l.t0);case 26:return l.prev=26,_.f(),l.finish(26);case 29:l.next=9;break;case 31:l.next=36;break;case 33:l.prev=33,l.t1=l.catch(7),i.e(l.t1);case 36:return l.prev=36,i.f(),l.finish(36);case 39:l.next=3;break;case 41:l.next=46;break;case 43:l.prev=43,l.t2=l.catch(1),t.e(l.t2);case 46:return l.prev=46,t.f(),l.finish(46);case 49:case"end":return l.stop()}}),R,null,[[1,43,46,49],[7,33,36,39],[12,23,26,29]])}function L(){var e,t,r,n,o,i,a=arguments;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:for(e=a.length,t=new Array(e),r=0;r<e;r++)t[r]=a[r];n=0,o=t;case 2:if(!(n<o.length)){u.next=8;break}return i=o[n],u.delegateYield(i,"t0",5);case 5:n++,u.next=2;break;case 8:case"end":return u.stop()}}),M)}function B(e,t){var r,n,i,a,u,_,c,s,l,d;return regeneratorRuntime.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:r=(0,o.filter)(e.shell.widgets("main"),(function(e){return e.id.startsWith("LinkedOutputView-")&&e.path===t})),n=I((0,o.toArray)(r)),p.prev=2,n.s();case 4:if((i=n.n()).done){p.next=41;break}a=i.value,u=I((0,o.toArray)(a.children())),p.prev=7,u.s();case 9:if((_=u.n()).done){p.next=31;break}c=_.value,s=I((0,o.toArray)(c.children())),p.prev=12,s.s();case 14:if((l=s.n()).done){p.next=21;break}if(!((d=l.value)instanceof b.default)){p.next=19;break}return p.next=19,d;case 19:p.next=14;break;case 21:p.next=26;break;case 23:p.prev=23,p.t0=p.catch(12),s.e(p.t0);case 26:return p.prev=26,s.f(),p.finish(26);case 29:p.next=9;break;case 31:p.next=36;break;case 33:p.prev=33,p.t1=p.catch(7),u.e(p.t1);case 36:return p.prev=36,u.f(),p.finish(36);case 39:p.next=4;break;case 41:p.next=46;break;case 43:p.prev=43,p.t2=p.catch(2),n.e(p.t2);case 46:return p.prev=46,n.f(),p.finish(46);case 49:case"end":return p.stop()}}),T,null,[[2,43,46,49],[7,33,36,39],[12,23,26,29]])}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(n);if(o){var r=A(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return j(this,e)});function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),P(C(t=i.call(this)),"_notebook",void 0),P(C(t),"_editor_id",void 0),P(C(t),"_editor_type",void 0),P(C(t),"_path",void 0),P(C(t),"_cell",null),t._notebook=e.notebook,t._editor_id=e.editor_id,t._editor_type=e.editor_type,t._cell=e.cell||null,!t._editor_id||!t._editor_type){var r=t._cell.outputArea.widgets[0].widgets[1];t._editor_id=r.editor_id,t._editor_type=r.editor_type}return t.id="MetannoArea-".concat(v.UUID.uuid4()),t.title.label=t._editor_id,t.title.icon=W,t.title.caption=t._notebook.title.label?"For Notebook: ".concat(t._notebook.title.label||""):"",t.addClass("jp-LinkedOutputView"),t._notebook.context.ready.then((function(){if(t._editor_id&&t._editor_type){var e=new b.default({editor_id:t._editor_id,editor_type:t._editor_type},V.get(t._notebook.context));e.addClass("jp-OutputArea-output"),t.addWidget(e)}else t.dispose()})),t}return t=a,(r=[{key:"editor_id",get:function(){return this._editor_id}},{key:"editor_type",get:function(){return this._editor_type}},{key:"path",get:function(){var e,t;return null==this||null===(e=this._notebook)||void 0===e||null===(t=e.context)||void 0===t?void 0:t._path}}])&&S(t.prototype,r),a}(y.Panel);function J(e,t,r){var n=V.get(e);n||(n=new g.default(e,U),V.set(e,n));var o,i=I(r);try{for(i.s();!(o=i.n()).done;)o.value.manager=n}catch(e){i.e(e)}finally{i.f()}return t.removeMimeType(N),t.addFactory({safe:!0,mimeTypes:[N],createRenderer:function(e){return new b.default(e,n)}},0),new a.DisposableDelegate((function(){t&&t.removeMimeType(N),n.dispose()}))}function G(e){U.saveState=!!e.get("saveState").composite}t.MetannoArea=F;var X={id:"metanno:plugin",requires:[l.IRenderMimeRegistry,_.IDocumentManager],optional:[p.INotebookTracker,f.ISettingRegistry,c.IMainMenu,s.ILoggerRegistry,m.ILayoutRestorer],activate:function(e,t,r,n,o,i,a,_){var c=e.commands,s=e.shell,l=e.contextMenu,p=new d.WidgetTracker({namespace:"metanno-areas"});_&&_.restore(p,{command:"metanno:create-view",args:function(e){return{editor_id:e.content.editor_id,editor_type:e.content.editor_type,path:e.content.path}},name:function(e){return"".concat(e.content.path,":").concat(e.content.editor_type,":").concat(e.content.editor_id)},when:n.restored});var f,m,h=function(e){if(a){var t=V[e.context];t&&t.onUnhandledIOPubMessage.connect((function(t,r){var n=a.getLogger(e.context.path),o="warning";(u.KernelMessage.isErrorMsg(r)||u.KernelMessage.isStreamMsg(r)&&"stderr"===r.content.name)&&(o="error");var i=O(O({},r.content),{},{output_type:r.header.msg_type});n.rendermime=e.content.rendermime,n.log({type:"output",data:i,level:o})}))}};null!==o&&o.load(X.id).then((function(e){e.changed.connect(G),G(e)})).catch((function(e){console.error(e.message)})),t.addFactory({safe:!1,mimeTypes:[N],createRenderer:function(e){new b.default(e,null)}},0),null!==n&&(n.forEach((function(t){J(t.context,t.content.rendermime,L(K(t.content),B(e,t.sessionContext.path))),h(t)})),n.widgetAdded.connect((function(t,r){J(r.context,r.content.rendermime,L(K(r.content),B(e,r.sessionContext.path))),h(r)}))),null!==o&&c.addCommand("metanno:saveAnnotatorState",{label:"Save Annotator State Automatically",execute:function(){return o.set(X.id,"saveState",!U.saveState).catch((function(e){console.error("Failed to set ".concat(X.id,": ").concat(e.message))}))},isToggled:function(){return U.saveState}}),i&&i.settingsMenu.addGroup([{command:"metanno:saveAnnotatorState"}]),l.addItem({command:"metanno:create-view",selector:".jp-Notebook .jp-CodeCell",rank:10.5}),c.addCommand("metanno:create-view",{label:"Detach",execute:(f=regeneratorRuntime.mark((function e(t){var o,i,a,u,_,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.editor_id,u=t.editor_type,_=t.path,!(a&&u&&_)){e.next=9;break}if(i=r.findWidget(_,"Notebook")){e.next=7;break}return e.abrupt("return");case 7:e.next=13;break;case 9:if(i=n.currentWidget){e.next=12;break}return e.abrupt("return");case 12:o=i.content.activeCell;case 13:return s=new F({notebook:i,cell:o,editor_id:a,editor_type:u}),l=new d.MainAreaWidget({content:s}),i.context.addSibling(l,{ref:i.id,mode:"split-bottom"}),p.add(l),p.save(l),i.content.disposed.connect((function(){l.dispose()})),e.next=21,Promise.all([c.execute("notebook:hide-cell-outputs",t)]);case 21:case"end":return e.stop()}}),e)})),m=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=f.apply(e,t);function i(e){q(o,r,n,i,a,"next",e)}function a(e){q(o,r,n,i,a,"throw",e)}i(void 0)}))},function(e){return m.apply(this,arguments)}),isEnabled:function(){if(null===n.currentWidget||n.currentWidget!==s.currentWidget)return!1;for(var e=n.currentWidget.content,t=e.activeCellIndex,r=0;r<e.widgets.length;++r)if(e.isSelected(e.widgets[r])&&r!==t)return!1;return!0}})},autoStart:!0},H=X;t.default=H},9641:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5666);var o=r(6510),i=s(r(4456)),a=r(8625),u=s(r(6271)),_=s(r(2954)),c=s(r(318));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,n,o,i,a){try{var u=e[i](a),_=u.value}catch(e){return void r(e)}u.done?t(_):Promise.resolve(_).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)}))}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},f(e,t,r||e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function h(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(x,e);var t,r,n,o,s,l,b,w=(l=x,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(l);if(b){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function x(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),g(y(r=w.call(this)),"_mimeType",void 0),g(y(r),"_manager",void 0),g(y(r),"setManager",void 0),g(y(r),"_rerenderMimeModel",void 0),g(y(r),"model",void 0),g(y(r),"_editor_id",void 0),g(y(r),"_editor_type",void 0),r._mimeType=e.mimeType,r._editor_id=e.editor_id,r._editor_type=e.editor_type,r._manager=t?Promise.resolve(t):new Promise((function(e,t){r.setManager=e})),r._rerenderMimeModel=null,r.model=null,r.showContent(),r}return t=x,r=[{key:"editor_id",get:function(){if(!this._editor_id){var e=this.model.data[this._mimeType];this._editor_id=e["editor-id"]}return this._editor_id}},{key:"editor_type",get:function(){if(!this._editor_type){var e=this.model.data[this._mimeType];this._editor_type=e["editor-type"]}return this._editor_type}},{key:"manager",set:function(e){e.restored.connect(this._rerender,this),this.setManager(e)}},{key:"setFlag",value:function(e){var t=this.isVisible;f(v(x.prototype),"setFlag",this).call(this,e),this.isVisible&&!t?this.showContent():!this.isVisible&&t&&this.hideContent()}},{key:"clearFlag",value:function(e){var t=this.isVisible;f(v(x.prototype),"clearFlag",this).call(this,e),this.isVisible&&!t?this.showContent():!this.isVisible&&t&&this.hideContent()}},{key:"renderModel",value:(s=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.model=t,e.next=3,this.showContent();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"hideContent",value:(o=d(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isVisible||(i.default.unmountComponentAtNode(this.node),this._manager.then((function(e){return e.views.delete(t)})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"showContent",value:(n=d(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isVisible){e.next=2;break}return e.abrupt("return");case 2:if(t=this._editor_id,r=this._editor_type,t&&r){e.next=12;break}if(!this.model){e.next=11;break}n=this.model.data[this._mimeType],t=n["editor-id"],r=n["editor-type"],e.next=12;break;case 11:return e.abrupt("return");case 12:return this.node.textContent="Loading widget..."+t,e.next=15,this._manager;case 15:(o=e.sent).views.add(this);try{i.default.unmountComponentAtNode(this.node)}catch(e){}"span-editor"===r?i.default.render(u.default.createElement(a.Provider,{store:o.store},u.default.createElement(_.default,{id:t,onClickSpan:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_click_span).apply(void 0,[t].concat(n))},onEnterSpan:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_enter_span).apply(void 0,[t].concat(n))},onLeaveSpan:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_leave_span).apply(void 0,[t].concat(n))},onKeyPress:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_key_press).apply(void 0,[t].concat(n))},onMouseSelect:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_mouse_select).apply(void 0,[t].concat(n))},onButtonPress:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_button_press).apply(void 0,[t].concat(n))},registerActions:function(e){o.actions[t]=e},selectEditorState:function(){var e;return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.select_editor_state).apply(void 0,arguments)}})),this.node):"table-editor"===r&&i.default.render(u.default.createElement(a.Provider,{store:o.store},u.default.createElement(c.default,{id:t,onKeyPress:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_key_press).apply(void 0,[t].concat(n))},onClickCellContent:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_click_cell_content).apply(void 0,[t].concat(n))},onSelectedCellChange:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_select_cell).apply(void 0,[t].concat(n))},onSelectedRowsChange:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_select_rows).apply(void 0,[t].concat(n))},onCellChange:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_cell_change).apply(void 0,[t].concat(n))},registerActions:function(e){o.actions[t]=e},selectEditorState:function(){var e;return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.select_editor_state).apply(void 0,arguments)},onButtonPress:function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.try_catch_exec(null===(e=o.app)||void 0===e?void 0:e.handle_button_press).apply(void 0,[t].concat(n))}})),this.node);case 19:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"isDisposed",get:function(){return null===this._manager}},{key:"dispose",value:function(){this.isDisposed||(f(v(x.prototype),"dispose",this).call(this),this._manager=null)}},{key:"_rerender",value:function(){this._rerenderMimeModel&&(this.node.textContent="",this.removeClass("jupyter-widgets"),this.renderModel(this._rerenderMimeModel).then())}}],r&&p(t.prototype,r),x}(o.Widget);t.default=b},2481:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eval_code=eval_code;var _immer=__webpack_require__(2826),_widgets=__webpack_require__(6510),_require=__webpack_require__(1127),AssertionError=_require.AssertionError,AttributeError=_require.AttributeError,BaseException=_require.BaseException,DeprecationWarning=_require.DeprecationWarning,Exception=_require.Exception,IndexError=_require.IndexError,IterableError=_require.IterableError,KeyError=_require.KeyError,NotImplementedError=_require.NotImplementedError,RuntimeWarning=_require.RuntimeWarning,StopIteration=_require.StopIteration,UserWarning=_require.UserWarning,ValueError=_require.ValueError,Warning=_require.Warning,__JsIterator__=_require.__JsIterator__,__PyIterator__=_require.__PyIterator__,__Terminal__=_require.__Terminal__,__add__=_require.__add__,__and__=_require.__and__,__call__=_require.__call__,__class__=_require.__class__,__envir__=_require.__envir__,__eq__=_require.__eq__,__floordiv__=_require.__floordiv__,__ge__=_require.__ge__,__get__=_require.__get__,__getcm__=_require.__getcm__,__getitem__=_require.__getitem__,__getslice__=_require.__getslice__,__getsm__=_require.__getsm__,__gt__=_require.__gt__,__i__=_require.__i__,__iadd__=_require.__iadd__,__iand__=_require.__iand__,__idiv__=_require.__idiv__,__ijsmod__=_require.__ijsmod__,__ilshift__=_require.__ilshift__,__imatmul__=_require.__imatmul__,__imod__=_require.__imod__,__imul__=_require.__imul__,__in__=_require.__in__,__init__=_require.__init__,__ior__=_require.__ior__,__ipow__=_require.__ipow__,__irshift__=_require.__irshift__,__isub__=_require.__isub__,__ixor__=_require.__ixor__,__jsUsePyNext__=_require.__jsUsePyNext__,__jsmod__=_require.__jsmod__,__k__=_require.__k__,__kwargtrans__=_require.__kwargtrans__,__le__=_require.__le__,__lshift__=_require.__lshift__,__lt__=_require.__lt__,__matmul__=_require.__matmul__,__mergefields__=_require.__mergefields__,__mergekwargtrans__=_require.__mergekwargtrans__,__mod__=_require.__mod__,__mul__=_require.__mul__,__ne__=_require.__ne__,__neg__=_require.__neg__,__nest__=_require.__nest__,__or__=_require.__or__,__pow__=_require.__pow__,__pragma__=_require.__pragma__,__proxy__=_require.__proxy__,__pyUseJsNext__=_require.__pyUseJsNext__,__rshift__=_require.__rshift__,__setitem__=_require.__setitem__,__setproperty__=_require.__setproperty__,__setslice__=_require.__setslice__,__sort__=_require.__sort__,__specialattrib__=_require.__specialattrib__,__sub__=_require.__sub__,__super__=_require.__super__,__t__=_require.__t__,__terminal__=_require.__terminal__,__truediv__=_require.__truediv__,__withblock__=_require.__withblock__,__xor__=_require.__xor__,abs=_require.abs,all=_require.all,any=_require.any,assert=_require.assert,bool=_require.bool,bytearray=_require.bytearray,bytes=_require.bytes,callable=_require.callable,chr=_require.chr,copy=_require.copy,deepcopy=_require.deepcopy,delattr=_require.delattr,dict=_require.dict,dir=_require.dir,divmod=_require.divmod,enumerate=_require.enumerate,filter=_require.filter,float=_require.float,getattr=_require.getattr,hasattr=_require.hasattr,input=_require.input,int=_require.int,isinstance=_require.isinstance,issubclass=_require.issubclass,len=_require.len,list=_require.list,map=_require.map,max=_require.max,min=_require.min,object=_require.object,ord=_require.ord,pow=_require.pow,print=_require.print,property=_require.property,py_TypeError=_require.py_TypeError,py_iter=_require.py_iter,py_metatype=_require.py_metatype,py_next=_require.py_next,py_reversed=_require.py_reversed,py_typeof=_require.py_typeof,range=_require.range,repr=_require.repr,round=_require.round,set=_require.set,setattr=_require.setattr,sorted=_require.sorted,str=_require.str,sum=_require.sum,tuple=_require.tuple,zip=_require.zip,chain_map=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))},chain_list=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return[].concat.apply([],t)},kernel_only=function(e){var t=e();return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.manager.comm.send({method:"run_method",data:{method_name:t,args:n}})}},frontend_only=function(e){return e.frontend_only=!0,e},produce=function(e){return function t(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a=[],u=(0,_immer.produce)(r.manager.store.getState(),(function(t){r.state=t,e.apply(void 0,[r].concat(o))}),(function(e,t){return a=e}));r.manager.store.dispatch({type:"SET_STATE",payload:u}),t.frontend_only||e.frontend_only||(r.manager.comm.send({method:"patch",data:{patches:a}}),delete r.state)}},make_uid=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(String).join("-")};function eval_code(code){return eval(code)}},1635:function(e,t,r){(t=r(3645)(!1)).push([e.id,".jp-toastContainer .Toastify__toast-body {\n    display: flex;\n}",""]),e.exports=t},5525:function(e,t,r){"use strict";r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="16px" viewBox="-0.5 -0.5 115 123">\n    <defs/>\n    <g>\n        <rect x="4" y="22" width="106" height="96" rx="8.64" ry="8.64" fill="#dae8fc" stroke="#6c8ebf" stroke-width="9" pointer-events="all"/>\n        <rect x="16" y="4" width="65" height="54" rx="4.86" ry="4.86" fill="#ffffff" stroke="#6c8ebf" stroke-width="9" pointer-events="all"/>\n    </g>\n</svg>'},1437:function(e,t,r){var n=r(1635);"string"==typeof n&&(n=[[e.id,n,""]]);r(6723)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)}}]);