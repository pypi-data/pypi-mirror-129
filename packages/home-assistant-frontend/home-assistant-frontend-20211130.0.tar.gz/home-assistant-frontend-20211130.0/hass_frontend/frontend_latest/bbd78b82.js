"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[26127],{23682:(e,t,n)=>{function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:()=>r})},90394:(e,t,n)=>{function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:()=>r})},79021:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(90394),s=n(34327),a=n(23682);function i(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),i=(0,r.Z)(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}},59699:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(90394),s=n(39244),a=n(23682),i=36e5;function o(e,t){(0,a.Z)(2,arguments);var n=(0,r.Z)(t);return(0,s.Z)(e,n*i)}},39244:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(90394),s=n(34327),a=n(23682);function i(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e).getTime(),i=(0,r.Z)(t);return new Date(n+i)}},32182:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(90394),s=n(34327),a=n(23682);function i(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),i=(0,r.Z)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var o=n.getDate(),c=new Date(n.getTime());c.setMonth(n.getMonth()+i+1,0);var u=c.getDate();return o>=u?c:(n.setFullYear(c.getFullYear(),c.getMonth(),o),n)}},93752:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(34327),s=n(23682);function a(e){(0,s.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(23,59,59,999),t}},70390:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(93752);function s(){return(0,r.Z)(Date.now())}},47538:(e,t,n)=>{function r(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),s=new Date(0);return s.setFullYear(t,n,r-1),s.setHours(23,59,59,999),s}n.d(t,{Z:()=>r})},59429:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(34327),s=n(23682);function a(e){(0,s.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(0,0,0,0),t}},13250:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(34327),s=n(23682);function a(e){(0,s.Z)(1,arguments);var t=(0,r.Z)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},27088:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(59429);function s(){return(0,r.Z)(Date.now())}},83008:(e,t,n)=>{function r(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),s=new Date(0);return s.setFullYear(t,n,r-1),s.setHours(0,0,0,0),s}n.d(t,{Z:()=>r})},34327:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(23682);function s(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},7323:(e,t,n)=>{n.d(t,{p:()=>r});const r=(e,t)=>e&&e.config.components.includes(t)},34007:(e,t,n)=>{n.d(t,{N:()=>r});const r=(e,t)=>{if(!e.toLowerCase().startsWith(t))return;const n=e.substring(t.length);return s(n.substr(0,n.indexOf(" ")))?n:n[0].toUpperCase()+n.slice(1)},s=e=>e.toLowerCase()!==e},85415:(e,t,n)=>{n.d(t,{$:()=>r,f:()=>s});const r=(e,t)=>e<t?-1:e>t?1:0,s=(e,t)=>r(e.toLowerCase(),t.toLowerCase())},57066:(e,t,n)=>{n.d(t,{Lo:()=>i,IO:()=>o,qv:()=>c,sG:()=>d});var r=n(97330),s=n(85415),a=n(38346);const i=(e,t)=>e.callWS({type:"config/area_registry/create",...t}),o=(e,t,n)=>e.callWS({type:"config/area_registry/update",area_id:t,...n}),c=(e,t)=>e.callWS({type:"config/area_registry/delete",area_id:t}),u=e=>e.sendMessagePromise({type:"config/area_registry/list"}).then((e=>e.sort(((e,t)=>(0,s.$)(e.name,t.name))))),l=(e,t)=>e.subscribeEvents((0,a.D)((()=>u(e).then((e=>t.setState(e,!0)))),500,!0),"area_registry_updated"),d=(e,t)=>(0,r.B)("_areaRegistry",u,l,e,t)},57292:(e,t,n)=>{n.d(t,{jL:()=>i,t1:()=>o,_Y:()=>c,q4:()=>l});var r=n(97330),s=n(91741),a=n(38346);const i=(e,t,n)=>e.name_by_user||e.name||n&&((e,t)=>{for(const n of t||[]){const t="string"==typeof n?n:n.entity_id,r=e.states[t];if(r)return(0,s.C)(r)}})(t,n)||t.localize("ui.panel.config.devices.unnamed_device"),o=(e,t,n)=>e.callWS({type:"config/device_registry/update",device_id:t,...n}),c=e=>e.sendMessagePromise({type:"config/device_registry/list"}),u=(e,t)=>e.subscribeEvents((0,a.D)((()=>c(e).then((e=>t.setState(e,!0)))),500,!0),"device_registry_updated"),l=(e,t)=>(0,r.B)("_dr",c,u,e,t)},65253:(e,t,n)=>{n.d(t,{Pb:()=>r,CE:()=>s,uh:()=>a,r4:()=>i,Nq:()=>o,h8:()=>c,fm:()=>u});const r="system-admin",s="system-users",a=async e=>e.callWS({type:"config/auth/list"}),i=async(e,t,n)=>e.callWS({type:"config/auth/create",name:t,group_ids:n}),o=async(e,t,n)=>e.callWS({...n,type:"config/auth/update",user_id:t}),c=async(e,t)=>e.callWS({type:"config/auth/delete",user_id:t}),u=e=>e?e.trim().split(" ").slice(0,3).map((e=>e.substr(0,1))).join(""):"?"},38926:(e,t,n)=>{n.d(t,{VG:()=>f,AP:()=>y});var r=n(58831),s=n(22311),a=n(91741);var i=n(34007),o=n(85415),c=n(5986),u=n(41499),l=n(65253);const d=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","script","sun","zone"]),p=new Set(["mobile_app"]),f=(e,t,n=!0)=>{const s=[],o=[],c=t.title?`${t.title} `.toLowerCase():void 0,l=[];for(const[t,d]of e){const e=(0,r.M)(t);if("alarm_control_panel"===e){const e={type:"alarm-panel",entity:t};s.push(e)}else if("camera"===e){const e={type:"picture-entity",entity:t};s.push(e)}else if("climate"===e){const e={type:"thermostat",entity:t};s.push(e)}else if("humidifier"===e){const e={type:"humidifier",entity:t};s.push(e)}else if("media_player"===e){const e={type:"media-control",entity:t};s.push(e)}else if("plant"===e){const e={type:"plant-status",entity:t};s.push(e)}else if("weather"===e){const e={type:"weather-forecast",entity:t,show_forecast:!1};s.push(e)}else if(!n||"scene"!==e&&"script"!==e)if("sensor"===e&&(null==d?void 0:d.attributes.device_class)===u.A);else{let e;const n=c&&d&&(e=(0,i.N)((0,a.C)(d),c))?{entity:t,name:e}:t;o.push(n)}else{const e={entity:t,show_icon:!0,show_name:!0};let n;c&&d&&(n=(0,i.N)((0,a.C)(d),c))&&(e.name=n),l.push(e)}}if(0===o.length&&l.length>0)return f(e,t,!1);if(o.length>0||l.length>0){const e={type:"entities",entities:o,...t};l.length>0&&(e.footer={type:"buttons",entities:l}),s.unshift(e)}return s.length<2?s:[{type:"grid",square:!1,columns:1,cards:s}]},g=(e,t,n,i,u,d)=>{const p=(e=>{const t=[],n={};return Object.keys(e).forEach((s=>{const a=e[s];"group"===(0,r.M)(s)?t.push(a):n[s]=a})),t.forEach((e=>e.attributes.entity_id.forEach((e=>{delete n[e]})))),{groups:t,ungrouped:n}})(u);p.groups.sort(((e,t)=>d[e.entity_id]-d[t.entity_id]));const g={};Object.keys(p.ungrouped).forEach((e=>{const t=p.ungrouped[e],n=(0,s.N)(t);n in g||(g[n]=[]),g[n].push(t.entity_id)}));let y=[];if("person"in g){const e=[];if(1===g.person.length)y.push({type:"entities",entities:g.person});else{let t,n="";for(const r of g.person){const s=u[r];let a=s.attributes.entity_picture;if(!a){if(void 0===t){const e=getComputedStyle(document.body);t=encodeURIComponent(e.getPropertyValue("--light-primary-color").trim()),n=encodeURIComponent((e.getPropertyValue("--text-light-primary-color")||e.getPropertyValue("--primary-text-color")).trim())}a=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${t}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${n}' font-size='1.3em' dy='.3em'%3E${(0,l.fm)(s.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}e.push({type:"picture-entity",entity:r,aspect_ratio:"1",show_name:!1,image:a})}y.push({type:"grid",square:!0,columns:3,cards:e})}delete g.person}p.groups.forEach((e=>{y=y.concat(f(e.attributes.entity_id.map((e=>[e,u[e]])),{title:(0,a.C)(e),show_header_toggle:"hidden"!==e.attributes.control}))})),Object.keys(g).sort().forEach((t=>{y=y.concat(f(g[t].sort(((e,t)=>(0,o.$)((0,a.C)(u[e]),(0,a.C)(u[t])))).map((e=>[e,u[e]])),{title:(0,c.Lh)(e,t)}))}));const h={path:t,title:n,cards:y};return i&&(h.icon=i),h},y=(e,t,n,r,a,i)=>{const o=((e,t)=>{const n={},r=new Set(t.filter((e=>e.entity_category||p.has(e.platform))).map((e=>e.entity_id)));return Object.keys(e).forEach((t=>{const a=e[t];d.has((0,s.N)(a))||r.has(a.entity_id)||(n[t]=e[t])})),n})(r,n),c={};Object.keys(o).forEach((e=>{const t=o[e];t.attributes.order&&(c[e]=t.attributes.order)}));const u=((e,t,n,r)=>{const s={...r},a=[];for(const r of e){const e=[],i=new Set(t.filter((e=>e.area_id===r.area_id)).map((e=>e.id)));for(const t of n)(i.has(t.device_id)&&!t.area_id||t.area_id===r.area_id)&&t.entity_id in s&&(e.push(s[t.entity_id]),delete s[t.entity_id]);e.length>0&&a.push([r,e])}return{areasWithEntities:a,otherEntities:s}})(e,t,n,o),l=g(a,"default_view","Home",undefined,u.otherEntities,c),y=[];if(u.areasWithEntities.forEach((([e,t])=>{y.push(...f(t.map((e=>[e.entity_id,e])),{title:e.name}))})),i){const e=i.energy_sources.find((e=>"grid"===e.type));e&&e.flow_from.length>0&&y.push({title:a("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return l.cards.unshift(...y),l}},76478:(e,t,n)=>{n.a(e,(async e=>{n.r(t),n.d(t,{OriginalStatesStrategy:()=>f});var r=n(28101),s=n(7323),a=n(11950),i=n(57066),o=n(57292),c=n(55424),u=n(74186),l=n(38926),d=e([c]);c=(d.then?await d:d)[0];let p=!1;class f{static async generateView(e){const t=e.hass;if(t.config.state===r.UE)return{cards:[{type:"starting"}]};if(t.config.safe_mode)return{cards:[{type:"safe-mode"}]};let n;p||(p=!0,(0,i.sG)(t.connection,(()=>{})),(0,o.q4)(t.connection,(()=>{})),(0,u.LM)(t.connection,(()=>{}))),(0,s.p)(t,"energy")&&(n=(0,c.ZC)(t));const[d,f,g,y]=await Promise.all([(0,a.l)(t.connection,i.sG),(0,a.l)(t.connection,o.q4),(0,a.l)(t.connection,u.LM),t.loadBackendTranslation("title")]);let h;if(n)try{h=await n}catch(e){}const m=(0,l.AP)(d,f,g,t.states,y,h);return t.config.components.includes("geo_location")&&m&&m.cards&&m.cards.push({type:"map",geo_location_sources:["all"]}),0===m.cards.length&&m.cards.push({type:"empty-state"}),m}static async generateDashboard(e){return{title:e.hass.config.location_name,views:[{strategy:{type:"original-states"}}]}}}}))}}]);