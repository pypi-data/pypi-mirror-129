<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
  <data>
    <record id="view_form_crm_lead_line_creation_wizard" model="ir.ui.view">
      <field name="name">CRM Lead Line Creation Wizard</field>
      <field name="model">crm.lead.line.creation.wizard</field>
      <field name="arch" type="xml">
        <form>
          <group>
            <field name="available_product_category_ids" invisible="1"/>
            <field
                name="product_category_id"
                options="{'no_create_edit':True}"
                domain="[('id', 'in', available_product_category_ids)]"
            />
            <field
                name="product_id"
                options="{'no_create_edit':True}"
                domain="[('product_tmpl_id.categ_id.id', '=', product_category_id)]" />
            <field name="phone_number" attrs="{'invisible': [('product_category_id', 'not in', [%(telecom.broadband_fiber_service)d,%(telecom.mobile_service)d])]}" />
            <field name="service_street" attrs="{'invisible': [('product_category_id', 'not in', [%(telecom.broadband_fiber_service)d,%(telecom.broadband_adsl_service)d,%(telecom.broadband_radiofrequency_service)d])]}" />
          </group>
          <footer>
            <button type="object" name="button_creation" string="OK" />
            <button special="cancel" string="Cancel" class="btn-secondary"/>
          </footer>

        </form>
      </field>
    </record>
    <act_window id="action_crm_lead_line_creation_wizard"
        name="CRM Lead Line Creation Wizard"
        res_model="crm.lead.line.creation.wizard"
        view_type="form"
        view_mode="form"
        target="new"
    />
    <record id="view_crm_lead_line_creation_wizard_button" model="ir.ui.view">
      <field name="name">crm.lead.line.creation.wizard.button</field>
      <field name="model">crm.lead</field>
      <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
      <field name="arch" type="xml">
        <button name="%(crm.crm_lead_lost_action)d" position="after">
          <button name="%(telecom.action_crm_lead_line_creation_wizard)d"
                  string="Lead Line Creation"
                  type="action"
                  context="{'default_active_id': active_id}"
                  />
        </button>
      </field>
    </record>
  </data>
</odoo>